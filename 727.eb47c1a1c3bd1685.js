"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[727],{7727:(L,F,n)=>{n.r(F),n.d(F,{DashboardModule:()=>B});var b=n(177),y=n(9417),f=n(6525),D=n(5144),k=n(3811),j=n(1141),E=n(5756),G=n(5336),m=n(4662),x=n(467),c=n(2182),t=n(4438),V=n(102),M=n(7693),u=n(1626);class S{constructor(r,e,i,a,s,l,T,A,J,N,Q,W,X,Z,O,I,z,Y){this._listproduitexp=[],this._nbproduit=r||0,this._totalprixunitaire=e||0,this._totalgainunitaire=i||0,this._totalgaingros=a||0,this._nbproduitexp=s||0,this._listproduitexp=l||[],this._allmodelCodeList=T||[],this._nbqtyproduit=A||0,this._sizeallimage=J||0,this._chartUnitaireGain={},this._charteUnitairePrix={},this._totalQuantiteProduitParUnite={},this._nbArticle=this.nbArticle||0,this._nbVentes=this.nbVentes||0,this._nbFactures=this.nbFactures||0,this._nbService=this.nbService||0,this._nbCommande=this.nbCommande||0,this._totalFactures=O||0,this._totalGainFactures=I||0,this._totalVentes=z||0,this._totalGainVentes=Y||0}get totalQuantiteProduitParUnite(){return this._totalQuantiteProduitParUnite}set totalQuantiteProduitParUnite(r){this._totalQuantiteProduitParUnite=r}get charteUnitairePrix(){return this._charteUnitairePrix}set charteUnitairePrix(r){this._charteUnitairePrix=r}get chartUnitaireGain(){return this._chartUnitaireGain}set chartUnitaireGain(r){this._chartUnitaireGain=r}get nbproduit(){return this._nbproduit}set nbproduit(r){this._nbproduit=r}get totalprixunitaire(){return this._totalprixunitaire}set totalprixunitaire(r){this._totalprixunitaire=r}get totalgainunitaire(){return this._totalgainunitaire}set totalgainunitaire(r){this._totalgainunitaire=r}get totalgaingros(){return this._totalgaingros}set totalgaingros(r){this._totalgaingros=r}get nbproduitexp(){return this._nbproduitexp}set nbproduitexp(r){this._nbproduitexp=r}get listproduitexp(){return this._listproduitexp}set listproduitexp(r){this._listproduitexp=r}get allmodelCodeList(){return this._allmodelCodeList}set allmodelCodeList(r){this._allmodelCodeList=r}get nbqtyproduit(){return this._nbqtyproduit}set nbqtyproduit(r){this._nbqtyproduit=r}get sizeallimage(){return this._sizeallimage}set sizeallimage(r){this._sizeallimage=r}get nbArticle(){return this._nbArticle}set nbArticle(r){this._nbArticle=r}get nbVentes(){return this._nbVentes}set nbVentes(r){this._nbVentes=r}get nbFactures(){return this._nbFactures}set nbFactures(r){this._nbFactures=r}get nbService(){return this._nbService}set nbService(r){this._nbService=r}get nbCommande(){return this._nbCommande}set nbCommande(r){this._nbCommande=r}get totalFactures(){return this._totalFactures}set totalFactures(r){this._totalFactures=r}get totalGainFactures(){return this._totalGainFactures}set totalGainFactures(r){this._totalGainFactures=r}get totalVentes(){return this._totalVentes}set totalVentes(r){this._totalVentes=r}get totalGainVentes(){return this._totalGainVentes}set totalGainVentes(r){this._totalGainVentes=r}}var $=n(5312),d=n(1985),p=n(8810),h=n(8141),g=n(9437);let C=(()=>{class o{constructor(e){this.http=e,this.api=$.c.apiUrl+"/admin",this.statistic=new S}getStatistic(){const e=`${this.api}/statistic`,i=(0,c.gf)();if(console.log("Token:",i),i){const a=(new u.Lr).set("Authorization",`Bearer ${i}`).set("Content-Type","application/json; charset=utf-8");return this.http.get(e,{headers:a}).pipe((0,h.M)(s=>console.log("R\xe9ponse re\xe7ue :",s)),(0,g.W)(s=>(console.error("Erreur lors de la r\xe9cup\xe9ration des statistiques :",s),(0,p.$)(s))))}return new d.c}getVentesGainParJour(){const e=`${this.api}/ventes-gains-par-jour`,i=(0,c.gf)();if(console.log("Token:",i),i){const a=(new u.Lr).set("Authorization",`Bearer ${i}`).set("Content-Type","application/json; charset=utf-8");return this.http.get(e,{headers:a}).pipe((0,h.M)(s=>console.log("Ventes par jour re\xe7ues :",s)),(0,g.W)(s=>(console.error("Erreur lors de la r\xe9cup\xe9ration des ventes par jour :",s),(0,p.$)(s))))}return new d.c}getFacturesGainParJour(){const e=`${this.api}/factures-gains-par-jour`,i=(0,c.gf)();if(console.log("Token:",i),i){const a=(new u.Lr).set("Authorization",`Bearer ${i}`).set("Content-Type","application/json; charset=utf-8");return this.http.get(e,{headers:a}).pipe((0,h.M)(s=>console.log("Donn\xe9es des factures et gains re\xe7ues :",s)),(0,g.W)(s=>(console.error("Erreur lors de la r\xe9cup\xe9ration des factures et gains :",s),(0,p.$)(s))))}return new d.c}getVentesEtGainsParMois(){const e=`${this.api}/ventes-gains-par-mois`,i=(0,c.gf)();if(i){const a=(new u.Lr).set("Authorization",`Bearer ${i}`).set("Content-Type","application/json; charset=utf-8");return this.http.get(e,{headers:a}).pipe((0,h.M)(s=>console.log("Donn\xe9es des ventes et gains re\xe7ues :",s)),(0,g.W)(s=>(console.error("Erreur lors de la r\xe9cup\xe9ration des ventes et gains :",s),(0,p.$)(s))))}return new d.c}getFacturesEtGainsParMois(){const e=`${this.api}/factures-et-gains-par-mois`,i=(0,c.gf)();if(i){const a=(new u.Lr).set("Authorization",`Bearer ${i}`).set("Content-Type","application/json; charset=utf-8");return this.http.get(e,{headers:a}).pipe((0,h.M)(s=>console.log("Donn\xe9es des ventes et gains re\xe7ues :",s)),(0,g.W)(s=>(console.error("Erreur lors de la r\xe9cup\xe9ration des ventes et gains :",s),(0,p.$)(s))))}return new d.c}static#t=this.\u0275fac=function(i){return new(i||o)(t.KVO(u.Qq))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var P=n(2014);const v=()=>({width:"2.5rem",height:"2.5rem"});let R=(()=>{class o{constructor(e,i,a,s,l){this.productService=e,this.layoutService=i,this.route=a,this.servicestatistic=s,this.venteservice=l,this.produits=[],this.ventes=[],this.chartType="bar"}ngOnInit(){this.getFacturesEtGainsParMois(),this.getVenteDay(),this.getfactureByDay(),this.getVentesEtGainsParMois(),this.venteservice.getVentes().subscribe(i=>{this.ventes=i});const e=(0,c.gf)();null==e||"404"===e?this.route.navigate(["/auth/login"]):this.loadData()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}getServiceStatisticTotalQuantityFormatted(){const e=this.servicestatistic.statistic.totalQuantiteProduitParUnite;let i="";for(let a=0;a<e.length;a++)i+=`Unit\xe9: ${e[a][0]} \n Total: ${e[a][1]}\n`;return i.trim()}loadData(){var e=this;return(0,x.A)(function*(){try{const i=yield e.servicestatistic.getStatistic().toPromise();console.log(i),e.servicestatistic.statistic=i}catch(i){console.error("Error loading data",i)}})()}sortDataByDate(e){return Object.keys(e).sort().map(i=>({date:i,value:e[i]}))}getVenteDay(){this.servicestatistic.getVentesGainParJour().subscribe(e=>{if(console.log("Donn\xe9es de ventes et gains par jour re\xe7ues :",e),e){const i=this.sortDataByDate(e.ventes),a=this.sortDataByDate(e.gains);this.chartDataVentes={labels:i.map(s=>s.date),datasets:[{label:"Ventes par Jour",data:i.map(s=>s.value),fill:!1,borderColor:"#0523cc"},{label:"Gains par Jour",data:a.map(s=>s.value),fill:!1,borderColor:"#08c408"}]},this.chartOptions={responsive:!0,scales:{x:{title:{display:!0,text:"Date"}},y:{title:{display:!0,text:"Montant"}}}}}},e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des ventes et gains par jour :",e)})}getfactureByDay(){this.servicestatistic.getFacturesGainParJour().subscribe(e=>{if(console.log("Donn\xe9es des factures et gains re\xe7ues :",e),e){const i=this.sortDataByDate(e.ventes),a=this.sortDataByDate(e.gains);this.chartDataFactures={labels:i.map(s=>s.date),datasets:[{label:"Ventes par Jour",data:i.map(s=>s.value),fill:!1,borderColor:"#0523cc"},{label:"Gains par Jour",data:a.map(s=>s.value),fill:!1,borderColor:"#66BB6A"}]},this.chartOptions={responsive:!0,scales:{x:{title:{display:!0,text:"Date"}},y:{title:{display:!0,text:"Montant"},ticks:{min:0,stepSize:100}}}}}},e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des factures et gains :",e)})}getVentesEtGainsParMois(){this.servicestatistic.getVentesEtGainsParMois().subscribe(e=>{if(console.log("Donn\xe9es des ventes et gains re\xe7ues :",e),e){const i=this.sortDataByDate(e.ventes),a=this.sortDataByDate(e.gains);this.chartDataVentesMois={labels:i.map(s=>s.date),datasets:[{label:"Ventes par Mois",data:i.map(s=>s.value),backgroundColor:"#FFA726",stack:"Stack 0"},{label:"Gains par Mois",data:a.map(s=>s.value),backgroundColor:"#66BB6A",stack:"Stack 1"}]},this.chartOptionsMois={responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(s){let l=s.dataset.label||"";return l&&(l+=": "),null!==s.parsed.y&&(l+=s.parsed.y.toFixed(2)),l}}}},scales:{x:{title:{display:!0,text:"Mois"},stacked:!0},y:{title:{display:!0,text:"Montant"},stacked:!0,ticks:{beginAtZero:!0,stepSize:100}}}}}},e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des ventes et gains par mois :",e)})}getFacturesEtGainsParMois(){this.servicestatistic.getFacturesEtGainsParMois().subscribe(e=>{if(console.log("Donn\xe9es des factures et gains par mois re\xe7ues :",e),e){const i=this.sortDataByDate(e.ventes),a=this.sortDataByDate(e.gains);this.chartDataFacturesMois={labels:i.map(s=>s.date),datasets:[{label:"Factures par Mois",data:i.map(s=>s.value),backgroundColor:"#FFA726",stack:"stack0"},{label:"Gains par Mois",data:a.map(s=>s.value),backgroundColor:"#66BB6A",stack:"stack1"}]},this.chartOptionsFactMois={responsive:!0,scales:{x:{title:{display:!0,text:"Mois"},stacked:!1,grid:{display:!1}},y:{title:{display:!0,text:"Montant"},stacked:!1,ticks:{beginAtZero:!0,stepSize:100}}}}}},e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des factures et gains par mois :",e)})}static#t=this.\u0275fac=function(i){return new(i||o)(t.rXU(V.b),t.rXU(M.Y),t.rXU(m.Ix),t.rXU(C),t.rXU(P.W))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:121,vars:33,consts:[[1,"grid"],[1,"col-12","lg:col-6","xl:col-3"],[1,"card","mb-0"],[1,"flex","justify-content-between","mb-3"],[1,"text-center"],[1,"block","text-500","font-medium","mb-3"],[1,"text-900","font-medium","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-blue-100","border-round",3,"ngStyle"],[1,"pi","pi-box","text-blue-500","text-xl"],[1,"text-500"],[1,"text-red-500","font-bold","pl-2"],[1,"flex","justify-content-between"],[1,"block","text-500","font-medium"],[1,"flex","align-items-center","justify-content-center","bg-orange-100","border-round",3,"ngStyle"],[1,"pi","text-orange-500","text-l"],[1,"flex","justify-content-around"],[1,"text-900","text-green-500","font-bold","text-l"],[1,"flex"],[1,"text-900","font-medium",2,"margin-left","6px"],[1,"flex","align-items-center","justify-content-center","bg-cyan-100","border-round",3,"ngStyle"],[1,"pi","pi-shopping-cart","text-cyan-500","text-xl"],[1,"text-900","text-red-500","font-bold","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-purple-100","border-round",3,"ngStyle"],[1,"pi","pi-file","text-purple-500","text-xl"],[1,"flex","flex-wrap"],[1,"col-12","md:col-6"],[1,"p-card"],[1,"p-2"],["type","line",3,"data","options"],["type","bar",3,"data","options"],["baseChart","",3,"data","options","type"]],template:function(i,a){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),t.EFF(6,"Produits"),t.k0s(),t.j41(7,"div",6),t.EFF(8),t.k0s()(),t.j41(9,"div",4)(10,"span",5),t.EFF(11," Pi\xe9ces en stock"),t.k0s(),t.j41(12,"div",6),t.EFF(13),t.k0s()(),t.j41(14,"div",7),t.nrm(15,"i",8),t.k0s()(),t.j41(16,"span",9),t.EFF(17,"Montant Achat Total"),t.k0s(),t.j41(18,"span",10),t.EFF(19),t.k0s()()(),t.j41(20,"div",1)(21,"div",2)(22,"div",11)(23,"div")(24,"span",12),t.EFF(25,"Revenus estim\xe9s (Gain)"),t.k0s()(),t.j41(26,"div",13)(27,"i",14),t.EFF(28,"TND"),t.k0s()()(),t.j41(29,"div",15)(30,"div")(31,"span",5),t.EFF(32,"Unitaire"),t.k0s(),t.j41(33,"div",16),t.EFF(34),t.k0s()(),t.j41(35,"div")(36,"span",5),t.EFF(37,"Gros"),t.k0s(),t.j41(38,"div",16),t.EFF(39),t.k0s()()()()(),t.j41(40,"div",1)(41,"div",2)(42,"div",11)(43,"div",17)(44,"span",5),t.EFF(45,"Ventes"),t.k0s(),t.j41(46,"span",18),t.EFF(47),t.k0s()(),t.j41(48,"div",19),t.nrm(49,"i",20),t.k0s()(),t.j41(50,"div",15)(51,"div")(52,"span",5),t.EFF(53,"Somme de ventes"),t.k0s(),t.j41(54,"div",21),t.EFF(55),t.k0s()(),t.j41(56,"div")(57,"span",5),t.EFF(58,"gain"),t.k0s(),t.j41(59,"div",16),t.EFF(60),t.k0s()()()()(),t.j41(61,"div",1)(62,"div",2)(63,"div",11)(64,"div",17)(65,"span",5),t.EFF(66,"Factures"),t.k0s(),t.j41(67,"span",18),t.EFF(68),t.k0s()(),t.j41(69,"div",22),t.nrm(70,"i",23),t.k0s()(),t.j41(71,"div",15)(72,"div")(73,"span",5),t.EFF(74,"Somme de ventes"),t.k0s(),t.j41(75,"div",21),t.EFF(76),t.k0s()(),t.j41(77,"div")(78,"span",5),t.EFF(79,"gain"),t.k0s(),t.j41(80,"div",16),t.EFF(81),t.k0s()()()()()(),t.j41(82,"h3"),t.EFF(83,"Statistiques des ventes"),t.k0s(),t.j41(84,"div",24)(85,"div",25)(86,"div",26)(87,"h5",27),t.EFF(88,"Journali\xe8re"),t.k0s(),t.nrm(89,"p-chart",28),t.k0s()(),t.j41(90,"div",25)(91,"div",26)(92,"h5",27),t.EFF(93,"Mensuel"),t.k0s(),t.nrm(94,"p-chart",29),t.k0s()()(),t.j41(95,"h3"),t.EFF(96,"Statistiques du factures"),t.k0s(),t.j41(97,"div",24)(98,"div",25)(99,"div",26)(100,"h5",27),t.EFF(101,"Journali\xe8re"),t.k0s(),t.nrm(102,"p-chart",28),t.k0s()(),t.j41(103,"div",25)(104,"div",26)(105,"h5",27),t.EFF(106,"Mensuel"),t.k0s(),t.nrm(107,"p-chart",30),t.k0s()(),t.j41(108,"h3"),t.EFF(109,"Statistiques du Services "),t.k0s(),t.j41(110,"div",24)(111,"div",25)(112,"div",26)(113,"h5",27),t.EFF(114,"Journali\xe8re"),t.k0s(),t.nrm(115,"p-chart",28),t.k0s()(),t.j41(116,"div",25)(117,"div",26)(118,"h5",27),t.EFF(119,"Mensuel"),t.k0s(),t.nrm(120,"p-chart",30),t.k0s()()()()),2&i&&(t.R7$(8),t.JRh(a.servicestatistic.statistic.nbproduit),t.R7$(5),t.JRh(a.servicestatistic.statistic.nbqtyproduit),t.R7$(),t.Y8G("ngStyle",t.lJ4(29,v)),t.R7$(5),t.SpI("",a.servicestatistic.statistic.totalprixunitaire," TND "),t.R7$(7),t.Y8G("ngStyle",t.lJ4(30,v)),t.R7$(8),t.SpI("TND ",a.servicestatistic.statistic.totalgainunitaire,""),t.R7$(5),t.SpI("TND ",a.servicestatistic.statistic.totalgaingros,""),t.R7$(8),t.SpI(" ",a.servicestatistic.statistic.nbVentes,""),t.R7$(),t.Y8G("ngStyle",t.lJ4(31,v)),t.R7$(7),t.SpI("TND ",a.servicestatistic.statistic.totalVentes,""),t.R7$(5),t.SpI("TND ",a.servicestatistic.statistic.totalGainVentes,""),t.R7$(8),t.SpI(" ",a.servicestatistic.statistic.nbFactures,""),t.R7$(),t.Y8G("ngStyle",t.lJ4(32,v)),t.R7$(7),t.SpI("TND ",a.servicestatistic.statistic.totalFactures,""),t.R7$(5),t.SpI("TND ",a.servicestatistic.statistic.totalGainFactures,""),t.R7$(8),t.Y8G("data",a.chartDataVentes)("options",a.chartOptions),t.R7$(5),t.Y8G("data",a.chartDataVentesMois)("options",a.chartOptionsMois),t.R7$(8),t.Y8G("data",a.chartDataFactures)("options",a.chartOptions),t.R7$(5),t.Y8G("data",a.chartDataFacturesMois)("options",a.chartOptionsFactMois)("type",a.chartType),t.R7$(8),t.Y8G("data",a.chartDataCommande)("options",a.chartOptions),t.R7$(5),t.Y8G("data",a.chartDataCommandeMois)("options",a.chartOptionsFactMois)("type",a.chartType))},dependencies:[b.B3,f.X],encapsulation:2})}return o})(),U=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#s=this.\u0275inj=t.G2t({imports:[m.iI.forChild([{path:"",component:R}]),m.iI]})}return o})(),B=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.$C({type:o});static#s=this.\u0275inj=t.G2t({imports:[b.MD,y.YN,f.F,D.Mk,k.bG,E.y,G.M6,j.tm,U]})}return o})()}}]);