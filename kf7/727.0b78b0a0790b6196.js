"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[727],{7727:(z,m,n)=>{n.r(m),n.d(m,{DashboardModule:()=>P});var g=n(177),f=n(9417),F=n(6525),y=n(5144),k=n(5571),D=n(1141),j=n(5756),E=n(5336),b=n(4662),G=n(467),c=n(4851),t=n(4438),x=n(7693),u=n(1626);class V{constructor(a,e,s,i,r,l,R,I,B,Y,L,Q,N,W,A,T,J,O){this._listproduitexp=[],this._nbproduit=a||0,this._totalprixunitaire=e||0,this._totalgainunitaire=s||0,this._totalgaingros=i||0,this._nbproduitexp=r||0,this._listproduitexp=l||[],this._allmodelCodeList=R||[],this._nbqtyproduit=I||0,this._sizeallimage=B||0,this._chartUnitaireGain={},this._charteUnitairePrix={},this._totalQuantiteProduitParUnite={},this._nbArticle=this.nbArticle||0,this._nbVentes=this.nbVentes||0,this._nbFactures=this.nbFactures||0,this._nbService=this.nbService||0,this._nbCommande=this.nbCommande||0,this._totalFactures=A||0,this._totalGainFactures=T||0,this._totalVentes=J||0,this._totalGainVentes=O||0}get totalQuantiteProduitParUnite(){return this._totalQuantiteProduitParUnite}set totalQuantiteProduitParUnite(a){this._totalQuantiteProduitParUnite=a}get charteUnitairePrix(){return this._charteUnitairePrix}set charteUnitairePrix(a){this._charteUnitairePrix=a}get chartUnitaireGain(){return this._chartUnitaireGain}set chartUnitaireGain(a){this._chartUnitaireGain=a}get nbproduit(){return this._nbproduit}set nbproduit(a){this._nbproduit=a}get totalprixunitaire(){return this._totalprixunitaire}set totalprixunitaire(a){this._totalprixunitaire=a}get totalgainunitaire(){return this._totalgainunitaire}set totalgainunitaire(a){this._totalgainunitaire=a}get totalgaingros(){return this._totalgaingros}set totalgaingros(a){this._totalgaingros=a}get nbproduitexp(){return this._nbproduitexp}set nbproduitexp(a){this._nbproduitexp=a}get listproduitexp(){return this._listproduitexp}set listproduitexp(a){this._listproduitexp=a}get allmodelCodeList(){return this._allmodelCodeList}set allmodelCodeList(a){this._allmodelCodeList=a}get nbqtyproduit(){return this._nbqtyproduit}set nbqtyproduit(a){this._nbqtyproduit=a}get sizeallimage(){return this._sizeallimage}set sizeallimage(a){this._sizeallimage=a}get nbArticle(){return this._nbArticle}set nbArticle(a){this._nbArticle=a}get nbVentes(){return this._nbVentes}set nbVentes(a){this._nbVentes=a}get nbFactures(){return this._nbFactures}set nbFactures(a){this._nbFactures=a}get nbService(){return this._nbService}set nbService(a){this._nbService=a}get nbCommande(){return this._nbCommande}set nbCommande(a){this._nbCommande=a}get totalFactures(){return this._totalFactures}set totalFactures(a){this._totalFactures=a}get totalGainFactures(){return this._totalGainFactures}set totalGainFactures(a){this._totalGainFactures=a}get totalVentes(){return this._totalVentes}set totalVentes(a){this._totalVentes=a}get totalGainVentes(){return this._totalGainVentes}set totalGainVentes(a){this._totalGainVentes=a}}var S=n(5312),h=n(1985),d=n(8810),p=n(9437);let $=(()=>{class o{constructor(e){this.http=e,this.api=S.c.apiUrl+"/statistique",this.statistic=new V}getStatistic(){const e=`${this.api}/statistic`,s=(0,c.gf)();if(s){const i=(new u.Lr).set("Authorization",`Bearer ${s}`).set("Content-Type","application/json; charset=utf-8");return this.http.get(e,{headers:i}).pipe((0,p.W)(r=>(0,d.$)(r)))}return new h.c}getVentesGainParJour(){const e=`${this.api}/ventes-gains-par-jour`,s=(0,c.gf)();if(s){const i=(new u.Lr).set("Authorization",`Bearer ${s}`).set("Content-Type","application/json; charset=utf-8");return this.http.get(e,{headers:i}).pipe((0,p.W)(r=>(0,d.$)(r)))}return new h.c}getFacturesGainParJour(){const e=`${this.api}/factures-gains-par-jour`,s=(0,c.gf)();if(s){const i=(new u.Lr).set("Authorization",`Bearer ${s}`).set("Content-Type","application/json; charset=utf-8");return this.http.get(e,{headers:i}).pipe((0,p.W)(r=>(0,d.$)(r)))}return new h.c}getVentesEtGainsParMois(){const e=`${this.api}/ventes-gains-par-mois`,s=(0,c.gf)();if(s){const i=(new u.Lr).set("Authorization",`Bearer ${s}`).set("Content-Type","application/json; charset=utf-8");return this.http.get(e,{headers:i}).pipe((0,p.W)(r=>(0,d.$)(r)))}return new h.c}getFacturesEtGainsParMois(){const e=`${this.api}/factures-et-gains-par-mois`,s=(0,c.gf)();if(s){const i=(new u.Lr).set("Authorization",`Bearer ${s}`).set("Content-Type","application/json; charset=utf-8");return this.http.get(e,{headers:i}).pipe((0,p.W)(r=>(0,d.$)(r)))}return new h.c}static#t=this.\u0275fac=function(s){return new(s||o)(t.KVO(u.Qq))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var M=n(2014);const v=()=>({width:"2.5rem",height:"2.5rem"});let U=(()=>{class o{constructor(e,s,i,r){this.layoutService=e,this.route=s,this.servicestatistic=i,this.venteservice=r,this.produits=[],this.ventes=[],this.chartType="bar"}ngOnInit(){this.getFacturesEtGainsParMois(),this.getVenteDay(),this.getfactureByDay(),this.getVentesEtGainsParMois(),this.venteservice.getVentes().subscribe(s=>{this.ventes=s});const e=(0,c.gf)();null==e||"404"===e?this.route.navigate(["/auth/login"]):this.loadData()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}getServiceStatisticTotalQuantityFormatted(){const e=this.servicestatistic.statistic.totalQuantiteProduitParUnite;let s="";for(let i=0;i<e.length;i++)s+=`Unit\xe9: ${e[i][0]} \n Total: ${e[i][1]}\n`;return s.trim()}loadData(){var e=this;return(0,G.A)(function*(){try{const s=yield e.servicestatistic.getStatistic().toPromise();e.servicestatistic.statistic=s}catch(s){console.error("Error loading data",s)}})()}sortDataByDate(e){return Object.keys(e).sort().map(s=>({date:s,value:e[s]}))}getVenteDay(){this.servicestatistic.getVentesGainParJour().subscribe(e=>{if(e){const s=this.sortDataByDate(e.ventes),i=this.sortDataByDate(e.gains);this.chartDataVentes={labels:s.map(r=>r.date),datasets:[{label:"Ventes par Jour",data:s.map(r=>r.value),fill:!1,borderColor:"#0523cc"},{label:"Gains par Jour",data:i.map(r=>r.value),fill:!1,borderColor:"#08c408"}]},this.chartOptions={responsive:!0,scales:{x:{title:{display:!0,text:"Date"}},y:{title:{display:!0,text:"Montant"}}}}}},e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des ventes et gains par jour :",e)})}getfactureByDay(){this.servicestatistic.getFacturesGainParJour().subscribe(e=>{if(e){const s=this.sortDataByDate(e.ventes),i=this.sortDataByDate(e.gains);this.chartDataFactures={labels:s.map(r=>r.date),datasets:[{label:"Ventes par Jour",data:s.map(r=>r.value),fill:!1,borderColor:"#0523cc"},{label:"Gains par Jour",data:i.map(r=>r.value),fill:!1,borderColor:"#66BB6A"}]},this.chartOptions={responsive:!0,scales:{x:{title:{display:!0,text:"Date"}},y:{title:{display:!0,text:"Montant"},ticks:{min:0,stepSize:100}}}}}},e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des factures et gains :",e)})}getVentesEtGainsParMois(){this.servicestatistic.getVentesEtGainsParMois().subscribe(e=>{if(e){const s=this.sortDataByDate(e.ventes),i=this.sortDataByDate(e.gains);this.chartDataVentesMois={labels:s.map(r=>r.date),datasets:[{label:"Ventes par Mois",data:s.map(r=>r.value),backgroundColor:"#FFA726",stack:"Stack 0"},{label:"Gains par Mois",data:i.map(r=>r.value),backgroundColor:"#66BB6A",stack:"Stack 1"}]},this.chartOptionsMois={responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(r){let l=r.dataset.label||"";return l&&(l+=": "),null!==r.parsed.y&&(l+=r.parsed.y.toFixed(2)),l}}}},scales:{x:{title:{display:!0,text:"Mois"},stacked:!0},y:{title:{display:!0,text:"Montant"},stacked:!0,ticks:{beginAtZero:!0,stepSize:100}}}}}},e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des ventes et gains par mois :",e)})}getFacturesEtGainsParMois(){this.servicestatistic.getFacturesEtGainsParMois().subscribe(e=>{if(e){const s=this.sortDataByDate(e.ventes),i=this.sortDataByDate(e.gains);this.chartDataFacturesMois={labels:s.map(r=>r.date),datasets:[{label:"Factures par Mois",data:s.map(r=>r.value),backgroundColor:"#FFA726",stack:"stack0"},{label:"Gains par Mois",data:i.map(r=>r.value),backgroundColor:"#66BB6A",stack:"stack1"}]},this.chartOptionsFactMois={responsive:!0,scales:{x:{title:{display:!0,text:"Mois"},stacked:!1,grid:{display:!1}},y:{title:{display:!0,text:"Montant"},stacked:!1,ticks:{beginAtZero:!0,stepSize:100}}}}}},e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des factures et gains par mois :",e)})}static#t=this.\u0275fac=function(s){return new(s||o)(t.rXU(x.Y),t.rXU(b.Ix),t.rXU($),t.rXU(M.W))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:132,vars:66,consts:[[1,"grid"],[1,"col-12","lg:col-6","xl:col-3"],[1,"card","mb-0"],[1,"flex","justify-content-between","mb-3"],[1,"text-center"],[1,"block","text-500","font-medium","mb-3"],[1,"text-900","font-medium","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-blue-100","border-round",3,"ngStyle"],[1,"pi","pi-box","text-blue-500","text-xl"],[1,"text-500"],[1,"text-red-500","font-bold","pl-2"],[1,"flex","justify-content-between"],[1,"block","text-500","font-medium"],[1,"flex","align-items-center","justify-content-center","bg-orange-100","border-round",3,"ngStyle"],[1,"pi","text-orange-500","text-l"],[1,"flex","justify-content-around"],[1,"text-900","text-green-500","font-bold","text-l"],[1,"flex"],[1,"text-900","font-medium",2,"margin-left","6px"],[1,"flex","align-items-center","justify-content-center","bg-cyan-100","border-round",3,"ngStyle"],[1,"pi","pi-shopping-cart","text-cyan-500","text-xl"],[1,"text-900","text-red-500","font-bold","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-purple-100","border-round",3,"ngStyle"],[1,"pi","pi-file","text-purple-500","text-xl"],[1,"flex","flex-wrap"],[1,"col-12","md:col-6"],[1,"p-card"],[1,"p-2"],["type","line",3,"data","options"],["type","bar",3,"data","options"],["baseChart","",3,"data","options","type"]],template:function(s,i){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),t.EFF(6,"Produits"),t.k0s(),t.j41(7,"div",6),t.EFF(8),t.nI1(9,"number"),t.k0s()(),t.j41(10,"div",4)(11,"span",5),t.EFF(12," Pi\xe9ces en stock"),t.k0s(),t.j41(13,"div",6),t.EFF(14),t.nI1(15,"number"),t.k0s()(),t.j41(16,"div",7),t.nrm(17,"i",8),t.k0s()(),t.j41(18,"span",9),t.EFF(19,"Montant Achat Total"),t.k0s(),t.j41(20,"span",10),t.EFF(21),t.nI1(22,"number"),t.k0s()()(),t.j41(23,"div",1)(24,"div",2)(25,"div",11)(26,"div")(27,"span",12),t.EFF(28,"Revenus estim\xe9s (Gain)"),t.k0s()(),t.j41(29,"div",13)(30,"i",14),t.EFF(31,"TND"),t.k0s()()(),t.j41(32,"div",15)(33,"div")(34,"span",5),t.EFF(35,"Unitaire"),t.k0s(),t.j41(36,"div",16),t.EFF(37),t.nI1(38,"number"),t.k0s()(),t.j41(39,"div")(40,"span",5),t.EFF(41,"Gros"),t.k0s(),t.j41(42,"div",16),t.EFF(43),t.nI1(44,"number"),t.k0s()()()()(),t.j41(45,"div",1)(46,"div",2)(47,"div",11)(48,"div",17)(49,"span",5),t.EFF(50,"Ventes"),t.k0s(),t.j41(51,"span",18),t.EFF(52),t.nI1(53,"number"),t.k0s()(),t.j41(54,"div",19),t.nrm(55,"i",20),t.k0s()(),t.j41(56,"div",15)(57,"div")(58,"span",5),t.EFF(59,"Somme de ventes"),t.k0s(),t.j41(60,"div",21),t.EFF(61),t.nI1(62,"number"),t.k0s()(),t.j41(63,"div")(64,"span",5),t.EFF(65,"gain"),t.k0s(),t.j41(66,"div",16),t.EFF(67),t.nI1(68,"number"),t.k0s()()()()(),t.j41(69,"div",1)(70,"div",2)(71,"div",11)(72,"div",17)(73,"span",5),t.EFF(74,"Factures"),t.k0s(),t.j41(75,"span",18),t.EFF(76),t.nI1(77,"number"),t.k0s()(),t.j41(78,"div",22),t.nrm(79,"i",23),t.k0s()(),t.j41(80,"div",15)(81,"div")(82,"span",5),t.EFF(83,"Somme de ventes"),t.k0s(),t.j41(84,"div",21),t.EFF(85),t.nI1(86,"number"),t.k0s()(),t.j41(87,"div")(88,"span",5),t.EFF(89,"gain"),t.k0s(),t.j41(90,"div",16),t.EFF(91),t.nI1(92,"number"),t.k0s()()()()()(),t.j41(93,"h3"),t.EFF(94,"Statistiques des ventes"),t.k0s(),t.j41(95,"div",24)(96,"div",25)(97,"div",26)(98,"h5",27),t.EFF(99,"Journali\xe8re"),t.k0s(),t.nrm(100,"p-chart",28),t.k0s()(),t.j41(101,"div",25)(102,"div",26)(103,"h5",27),t.EFF(104,"Mensuel"),t.k0s(),t.nrm(105,"p-chart",29),t.k0s()()(),t.j41(106,"h3"),t.EFF(107,"Statistiques du factures"),t.k0s(),t.j41(108,"div",24)(109,"div",25)(110,"div",26)(111,"h5",27),t.EFF(112,"Journali\xe8re"),t.k0s(),t.nrm(113,"p-chart",28),t.k0s()(),t.j41(114,"div",25)(115,"div",26)(116,"h5",27),t.EFF(117,"Mensuel"),t.k0s(),t.nrm(118,"p-chart",30),t.k0s()(),t.j41(119,"h3"),t.EFF(120,"Statistiques du Services "),t.k0s(),t.j41(121,"div",24)(122,"div",25)(123,"div",26)(124,"h5",27),t.EFF(125,"Journali\xe8re"),t.k0s(),t.nrm(126,"p-chart",28),t.k0s()(),t.j41(127,"div",25)(128,"div",26)(129,"h5",27),t.EFF(130,"Mensuel"),t.k0s(),t.nrm(131,"p-chart",30),t.k0s()()()()),2&s&&(t.R7$(8),t.JRh(t.i5U(9,29,i.servicestatistic.statistic.nbproduit,"1.0-3")),t.R7$(6),t.JRh(t.i5U(15,32,i.servicestatistic.statistic.nbqtyproduit,"1.0-3")),t.R7$(2),t.Y8G("ngStyle",t.lJ4(62,v)),t.R7$(5),t.SpI("",t.i5U(22,35,i.servicestatistic.statistic.totalprixunitaire,"1.3-3")," TND "),t.R7$(8),t.Y8G("ngStyle",t.lJ4(63,v)),t.R7$(8),t.SpI("TND ",t.i5U(38,38,i.servicestatistic.statistic.totalgainunitaire,"1.0-3"),""),t.R7$(6),t.SpI("TND ",t.i5U(44,41,i.servicestatistic.statistic.totalgaingros,"1.0-3"),""),t.R7$(9),t.SpI(" ",t.i5U(53,44,i.servicestatistic.statistic.nbVentes,"1.0-3"),""),t.R7$(2),t.Y8G("ngStyle",t.lJ4(64,v)),t.R7$(7),t.SpI("TND ",t.i5U(62,47,i.servicestatistic.statistic.totalVentes,"1.0-3"),""),t.R7$(6),t.SpI("TND ",t.i5U(68,50,i.servicestatistic.statistic.totalGainVentes,"1.0-3"),""),t.R7$(9),t.SpI(" ",t.i5U(77,53,i.servicestatistic.statistic.nbFactures,"1.0-3"),""),t.R7$(2),t.Y8G("ngStyle",t.lJ4(65,v)),t.R7$(7),t.SpI("TND ",t.i5U(86,56,i.servicestatistic.statistic.totalFactures,"1.0-3"),""),t.R7$(6),t.SpI("TND ",t.i5U(92,59,i.servicestatistic.statistic.totalGainFactures,"1.0-3"),""),t.R7$(9),t.Y8G("data",i.chartDataVentes)("options",i.chartOptions),t.R7$(5),t.Y8G("data",i.chartDataVentesMois)("options",i.chartOptionsMois),t.R7$(8),t.Y8G("data",i.chartDataFactures)("options",i.chartOptions),t.R7$(5),t.Y8G("data",i.chartDataFacturesMois)("options",i.chartOptionsFactMois)("type",i.chartType),t.R7$(8),t.Y8G("data",i.chartDataCommande)("options",i.chartOptions),t.R7$(5),t.Y8G("data",i.chartDataCommandeMois)("options",i.chartOptionsFactMois)("type",i.chartType))},dependencies:[g.B3,F.X,g.QX],encapsulation:2})}return o})(),C=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.$C({type:o});static#s=this.\u0275inj=t.G2t({imports:[b.iI.forChild([{path:"",component:U}]),b.iI]})}return o})(),P=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=t.$C({type:o});static#s=this.\u0275inj=t.G2t({imports:[g.MD,f.YN,F.F,y.Mk,k.bG,j.y,E.M6,D.tm,C]})}return o})()}}]);