"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[76],{8366:(E,w,n)=>{n.d(w,{X:()=>k});var a=n(4694),p=n(4851),v=n(8032),m=n.n(v),e=n(4438),d=n(7396),y=n(4109),f=n(4662),l=n(7693),C=n(5312),c=n(1626);let u=(()=>{class g{constructor(r,s){this.http=r,this.router=s,this.loggedIn=!1,this.apiL=C.c.apiUrl+"/login",this.loggedIn="true"===localStorage.getItem("loggedIn")}verifForgetPasswor(r,s){return this.http.post(`${this.apiL}/getVerifForget`,{email:r,secretKey:s})}updatePassword(r,s){return this.http.put(`${this.apiL}/${r}/update-password`,{newPassword:s})}static#e=this.\u0275fac=function(s){return new(s||g)(e.KVO(c.Qq),e.KVO(f.Ix))};static#t=this.\u0275prov=e.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})();var h=n(5831),_=n(1141),P=n(2242),b=n(9417),O=n(3057),j=n(6781);const M=()=>({width:"25rem"});let k=(()=>{class g{constructor(r,s,t,o,i,D){this.electronService=r,this.authService=s,this.router=t,this.layoutService=o,this.loginService=i,this.userService=D,this.user=new a.K,this.username="",this.password="",this.loginError=!1,this.visible=!1,this.emailverif="",this.secretKeyverif="",this.showVerif=!1,this.visibleConfirmPass=!1,this.visibleError=!1,this.visibleSuccess=!1,this.errorMessage="Votre mot de passe ne pas \xe9t\xe9 mis \xe0 jour",this.successMessage="Votre mot de passe a \xe9t\xe9 mis \xe0 jour."}onClicked(){this.loginError=!1,this.authService.login(this.username,this.password).subscribe(r=>{(0,p.WG)(r.token),this.router.navigate(["/"])},r=>{m().fire({title:"Erreur",text:"V\xe9rifiez vos donn\xe9es"+JSON.stringify(r),icon:"error"}),this.loginError=!0})}showDialogVerif(){this.showVerif=!0}verifForget(){this.loginService.verifForgetPasswor(this.emailverif,this.secretKeyverif).subscribe(r=>{r?(this.userId=r.id,this.showDialogPassword(),this.showVerif=!1):m().fire("Erreur","Email ou cl\xe9 secr\xe8te incorrecte","error")},r=>{m().fire("Erreur","V\xe9rifiez vos informations","error")})}resetFormPassword(){this.newPassword="",this.confirmPassword="",this.emailverif="",this.secretKeyverif=""}saveNewPassword(r){if(console.log("Nouveau mot de passe:",this.newPassword),console.log("Confirmez le mot de passe:",this.confirmPassword),this.newPassword!==this.confirmPassword)return this.errorMessage="Les mots de passe ne correspondent pas.",void(this.visibleError=!0);this.loginService.updatePassword(r,this.newPassword).subscribe(s=>{console.log("R\xe9sultat de la mise \xe0 jour:",s),s?(this.visibleSuccess=!0,this.visibleConfirmPass=!1,this.showVerif=!1):(this.errorMessage="La mise \xe0 jour du mot de passe a \xe9chou\xe9.",this.visibleError=!0)},s=>{console.error("Erreur lors de la mise \xe0 jour du mot de passe:",s),this.errorMessage="La mise \xe0 jour erron\xe9e",this.visibleError=!0}),this.resetFormPassword()}navigateToLogin(){this.visibleSuccess=!1}showDialogPassword(){this.visibleConfirmPass=!0}static#e=this.\u0275fac=function(s){return new(s||g)(e.rXU(d.Y),e.rXU(y.V),e.rXU(f.Ix),e.rXU(l.Y),e.rXU(u),e.rXU(h.D))};static#t=this.\u0275cmp=e.VBU({type:g,selectors:[["app-login"]],decls:55,vars:31,consts:[[1,"surface-200","flex","align-items-center","justify-content-center","min-h-screen","min-w-screen","overflow-hidden","responsive-container"],[1,"flex","flex-column","align-items-center","justify-content-center"],[1,"custom-box-gradient"],[1,"surface-card","py-8","px-4","sm:px-8","responsive-card"],[1,"text-center","mb-1"],["src","assets/layout/images/img.png","width","70px","height","70px","alt","logo"],[1,"text-900","text-3xl","font-medium","text-primary-700","mb-3"],[1,"flex","flex-column","gap-2"],["id","email1","type","text","placeholder","Email","pInputText","",1,"w-full","responsive-input",3,"ngModelChange","keydown.enter","ngModel"],["id","password1","placeholder","Mot de passe","On","",1,"responsive-password",3,"ngModelChange","keydown.enter","ngModel","toggleMask"],["pButton","","pRipple","","label","Login",1,"w-full","text-xl","responsive-button",3,"click"],[1,"flex","flex-column"],[1,"font-medium","no-underline","ml-2","text-right","cursor-pointer",2,"color","var(--primary-color)",3,"click"],["header","Saisir vos informations",3,"visibleChange","modal","visible"],[1,"flex","align-items-center","gap-3","mb-3"],["for","email",1,"font-semibold","w-6rem"],["pInputText","","id","email","autocomplete","off",1,"flex-auto",3,"ngModelChange","ngModel"],[1,"flex","align-items-center","gap-3","mb-5"],["for","secretKey",1,"font-semibold","w-6rem"],["pInputText","","id","secretKey","autocomplete","off",1,"flex-auto",3,"ngModelChange","ngModel"],[1,"flex","justify-content-end","gap-2"],["label","Cancel","severity","secondary",3,"onClick"],["label","Verifier",3,"onClick"],["header","Saisissez un nouveau mot de passe",3,"visibleChange","modal","visible"],[3,"ngSubmit"],["for","new-password",1,"font-semibold","w-6rem"],["pInputText","","type","password","id","new-password","name","newPassword","autocomplete","off",1,"flex-auto",3,"ngModelChange","ngModel"],["for","confirm-password",1,"font-semibold","w-6rem"],["pInputText","","type","password","id","confirm-password","name","confirmPassword","autocomplete","off",3,"ngModelChange","ngModel"],["label","Annuler",1,"p-button-secondary",3,"onClick"],["label","Enregistrer","type","submit"],["header","Erreur",3,"visibleChange","visible","modal","closable"],[1,"p-d-flex","p-ai-center","p-jc-center"],[1,"p-text-secondary"],[1,"p-d-flex","p-jc-end","p-mt-3"],["label","OK",3,"onClick"],["header","Succ\xe8s",3,"visibleChange","visible","modal","closable"]],template:function(s,t){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e.nrm(5,"img",5),e.j41(6,"div",6),e.EFF(7,"Bienvenue"),e.k0s()(),e.j41(8,"div",7)(9,"div")(10,"input",8),e.mxI("ngModelChange",function(i){return e.DH7(t.username,i)||(t.username=i),i}),e.bIt("keydown.enter",function(){return t.onClicked()}),e.k0s()(),e.j41(11,"div")(12,"p-password",9),e.mxI("ngModelChange",function(i){return e.DH7(t.password,i)||(t.password=i),i}),e.bIt("keydown.enter",function(){return t.onClicked()}),e.k0s()(),e.j41(13,"div")(14,"button",10),e.bIt("click",function(){return t.onClicked()}),e.k0s()(),e.j41(15,"div",11)(16,"a",12),e.bIt("click",function(){return t.showDialogVerif()}),e.EFF(17,"Mot de passe oubli\xe9?"),e.k0s()()()()()()(),e.j41(18,"p-dialog",13),e.mxI("visibleChange",function(i){return e.DH7(t.showVerif,i)||(t.showVerif=i),i}),e.j41(19,"div",14)(20,"label",15),e.EFF(21,"Email"),e.k0s(),e.j41(22,"input",16),e.mxI("ngModelChange",function(i){return e.DH7(t.emailverif,i)||(t.emailverif=i),i}),e.k0s()(),e.j41(23,"div",17)(24,"label",18),e.EFF(25,"Secret Key"),e.k0s(),e.j41(26,"input",19),e.mxI("ngModelChange",function(i){return e.DH7(t.secretKeyverif,i)||(t.secretKeyverif=i),i}),e.k0s()(),e.j41(27,"div",20)(28,"p-button",21),e.bIt("onClick",function(){return t.showVerif=!1}),e.k0s(),e.j41(29,"p-button",22),e.bIt("onClick",function(){return t.verifForget()}),e.k0s()()(),e.j41(30,"p-dialog",23),e.mxI("visibleChange",function(i){return e.DH7(t.visibleConfirmPass,i)||(t.visibleConfirmPass=i),i}),e.j41(31,"form",24),e.bIt("ngSubmit",function(){return t.saveNewPassword(t.userId)}),e.j41(32,"div",14)(33,"label",25),e.EFF(34,"Nouveau mot de passe"),e.k0s(),e.j41(35,"input",26),e.mxI("ngModelChange",function(i){return e.DH7(t.newPassword,i)||(t.newPassword=i),i}),e.k0s()(),e.j41(36,"div",17)(37,"label",27),e.EFF(38,"Confirmez le mot de passe"),e.k0s(),e.j41(39,"input",28),e.mxI("ngModelChange",function(i){return e.DH7(t.confirmPassword,i)||(t.confirmPassword=i),i}),e.k0s()(),e.j41(40,"div",20)(41,"p-button",29),e.bIt("onClick",function(){return t.visibleConfirmPass=!1}),e.k0s(),e.nrm(42,"p-button",30),e.k0s()()(),e.j41(43,"p-dialog",31),e.mxI("visibleChange",function(i){return e.DH7(t.visibleError,i)||(t.visibleError=i),i}),e.j41(44,"div",32)(45,"span",33),e.EFF(46),e.k0s()(),e.j41(47,"div",34)(48,"p-button",35),e.bIt("onClick",function(){return t.visibleError=!1}),e.k0s()()(),e.j41(49,"p-dialog",36),e.mxI("visibleChange",function(i){return e.DH7(t.visibleSuccess,i)||(t.visibleSuccess=i),i}),e.j41(50,"div",32)(51,"span",33),e.EFF(52),e.k0s()(),e.j41(53,"div",34)(54,"p-button",35),e.bIt("onClick",function(){return t.navigateToLogin()}),e.k0s()()()),2&s&&(e.R7$(10),e.R50("ngModel",t.username),e.R7$(2),e.R50("ngModel",t.password),e.Y8G("toggleMask",!0),e.R7$(6),e.Aen(e.lJ4(27,M)),e.Y8G("modal",!0),e.R50("visible",t.showVerif),e.R7$(4),e.R50("ngModel",t.emailverif),e.R7$(4),e.R50("ngModel",t.secretKeyverif),e.R7$(4),e.Aen(e.lJ4(28,M)),e.Y8G("modal",!0),e.R50("visible",t.visibleConfirmPass),e.R7$(5),e.R50("ngModel",t.newPassword),e.R7$(4),e.R50("ngModel",t.confirmPassword),e.R7$(4),e.Aen(e.lJ4(29,M)),e.R50("visible",t.visibleError),e.Y8G("modal",!0)("closable",!1),e.R7$(3),e.JRh(t.errorMessage),e.R7$(3),e.Aen(e.lJ4(30,M)),e.R50("visible",t.visibleSuccess),e.Y8G("modal",!0)("closable",!0),e.R7$(3),e.JRh(t.successMessage))},dependencies:[_._f,_.$n,P.S,b.qT,b.me,b.BC,b.cb,b.vS,b.cV,O._2,j.l],styles:[".responsive-form[_ngcontent-%COMP%]{width:100%;max-width:700px;margin:0 auto}.p-inputtext[_ngcontent-%COMP%], .custom-password-width[_ngcontent-%COMP%]   .p-password-input[_ngcontent-%COMP%], .custom-password-width[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%!important}@media (max-width: 600px){.responsive-form[_ngcontent-%COMP%]{padding:0 1rem}.p-inputtext[_ngcontent-%COMP%], .custom-password-width[_ngcontent-%COMP%]{width:100%!important}}[_nghost-%COMP%]     .pi-eye, [_nghost-%COMP%]     .pi-eye-slash{transform:scale(1.6);margin-right:1rem;color:var(--primary-color)!important}.responsive-container[_ngcontent-%COMP%]{width:100%;padding:0 1rem}.custom-box-gradient[_ngcontent-%COMP%]{border-radius:56px;padding:.3rem;background:linear-gradient(180deg,var(--primary-color) 10%,rgba(33,150,243,0) 30%)}.responsive-card[_ngcontent-%COMP%]{border-radius:53px;max-width:500px;max-height:500px;margin:0 auto}.responsive-input[_ngcontent-%COMP%], .responsive-password[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:1rem;width:100%}.responsive-checkbox[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.responsive-button[_ngcontent-%COMP%]{font-size:1.2rem}@media (max-width: 768px){.responsive-card[_ngcontent-%COMP%]{padding:1rem}.responsive-input[_ngcontent-%COMP%], .responsive-password[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.responsive-checkbox[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.responsive-button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 480px){.text-3xl[_ngcontent-%COMP%]{font-size:1.8rem}.responsive-input[_ngcontent-%COMP%], .responsive-password[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:1rem;padding:.8rem}.responsive-button[_ngcontent-%COMP%]{font-size:1rem}}"]})}return g})()},2014:(E,w,n)=>{n.d(w,{W:()=>f});var a=n(5312),p=n(1626),v=n(1985),m=n(4851),e=n(8810),d=n(9437),y=n(4438);let f=(()=>{class l{constructor(c){this.http=c,this.api=a.c.apiUrl+"/vente",this.show=!1,this.apiFact=a.c.apiUrl+"/factureVente"}getVentes(){const c=`${this.api}/read`,u=(0,m.gf)();if(u){const h=(new p.Lr).set("Authorization",`Bearer ${u}`).set("Content-Type","application/json; charset=utf8");return this.http.get(c,{headers:h})}return new v.c}removeVente(c){const u=`${this.api}/delete`,h=(0,m.gf)();if(h){const _=(new p.Lr).set("Authorization",`Bearer ${h}`).set("Content-Type","application/json; charset=utf8");return this.http.delete(u+"/"+c,{headers:_})}return new v.c}transferFacturation(c){const u=`${this.apiFact}/convertVenteToFactureVente`,h=(0,m.gf)(),_=(new p.Lr).set("Authorization",`Bearer ${h}`).set("Content-Type","application/json; charset=utf8");return this.http.post(u,c,{headers:_}).pipe((0,d.W)(P=>(console.error("Erreur lors du transfert de facturation",P),(0,e.$)(()=>new Error("Une erreur est survenue lors du transfert de facturation.")))))}genererReferenceFacture(){return"REF"+Math.floor(1e4*Math.random())}getDefaultEmailSociete(){return"default@example.com"}getEmailTransporteur(){return"transporteur@example.com"}static#e=this.\u0275fac=function(u){return new(u||l)(y.KVO(p.Qq))};static#t=this.\u0275prov=y.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},7164:(E,w,n)=>{n.d(w,{c:()=>m,m:()=>e});var a=n(4438),p=n(177);const v=["*"];let m=(()=>{class d{style;styleClass;layout="horizontal";type="solid";align;containerClass(){return{"p-divider p-component":!0,"p-divider-horizontal":"horizontal"===this.layout,"p-divider-vertical":"vertical"===this.layout,"p-divider-solid":"solid"===this.type,"p-divider-dashed":"dashed"===this.type,"p-divider-dotted":"dotted"===this.type,"p-divider-left":"horizontal"===this.layout&&(!this.align||"left"===this.align),"p-divider-center":"horizontal"===this.layout&&"center"===this.align||"vertical"===this.layout&&(!this.align||"center"===this.align),"p-divider-right":"horizontal"===this.layout&&"right"===this.align,"p-divider-top":"vertical"===this.layout&&"top"===this.align,"p-divider-bottom":"vertical"===this.layout&&"bottom"===this.align}}static \u0275fac=function(l){return new(l||d)};static \u0275cmp=a.VBU({type:d,selectors:[["p-divider"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",layout:"layout",type:"type",align:"align"},ngContentSelectors:v,decls:3,vars:6,consts:[["role","separator",3,"ngClass","ngStyle"],[1,"p-divider-content"]],template:function(l,C){1&l&&(a.NAR(),a.j41(0,"div",0)(1,"div",1),a.SdG(2),a.k0s()()),2&l&&(a.HbH(C.styleClass),a.Y8G("ngClass",C.containerClass())("ngStyle",C.style),a.BMQ("aria-orientation",C.layout)("data-pc-name","divider"))},dependencies:[p.YU,p.B3],styles:['@layer primeng{.p-divider-horizontal{display:flex;width:100%;position:relative;align-items:center}.p-divider-horizontal:before{position:absolute;display:block;top:50%;left:0;width:100%;content:""}.p-divider-horizontal.p-divider-left{justify-content:flex-start}.p-divider-horizontal.p-divider-right{justify-content:flex-end}.p-divider-horizontal.p-divider-center{justify-content:center}.p-divider-content{z-index:1}.p-divider-vertical{min-height:100%;margin:0 1rem;display:flex;position:relative;justify-content:center}.p-divider-vertical:before{position:absolute;display:block;top:0;left:50%;height:100%;content:""}.p-divider-vertical.p-divider-top{align-items:flex-start}.p-divider-vertical.p-divider-center{align-items:center}.p-divider-vertical.p-divider-bottom{align-items:flex-end}.p-divider-solid.p-divider-horizontal:before{border-top-style:solid}.p-divider-solid.p-divider-vertical:before{border-left-style:solid}.p-divider-dashed.p-divider-horizontal:before{border-top-style:dashed}.p-divider-dashed.p-divider-vertical:before{border-left-style:dashed}.p-divider-dotted.p-divider-horizontal:before{border-top-style:dotted}.p-divider-dotted.p-divider-horizontal:before{border-left-style:dotted}}\n'],encapsulation:2,changeDetection:0})}return d})(),e=(()=>{class d{static \u0275fac=function(l){return new(l||d)};static \u0275mod=a.$C({type:d});static \u0275inj=a.G2t({imports:[p.MD]})}return d})()}}]);